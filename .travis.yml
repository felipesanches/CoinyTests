language: python
before_install:
- sudo add-apt-repository -y ppa:ubuntu-toolchain-r/test
- sudo add-apt-repository --yes ppa:fontforge/fontforge
- sudo apt-get update -qq
- sudo apt-get install python-fontforge ttfautohint swig libicu-dev
- cp /usr/lib/python2.7/dist-packages/fontforge.* "$HOME/virtualenv/python2.7.9/lib/python2.7/site-packages"
# See issue travis-ci/travis-ci#1379
- sudo apt-get install -qq g++-4.8
- export CXX="g++-4.8" CC="gcc-4.8"
install:
- pip install Jinja2
- pip install pyicu
- pip install git+https://github.com/behdad/fontTools.git
- pip install git+https://github.com/googlefonts/fontcrunch.git
- pip install git+https://github.com/felipesanches/fontbakery.git@fsanches_experiments
before_script:
- mkdir -p builds/$TRAVIS_COMMIT
script: (set -o pipefail; PATH=/home/travis/virtualenv/python2.7.9/bin/:$PATH fontbakery-build.py
  . 2>&1 | tee -a    builds/$TRAVIS_COMMIT/buildlog.txt)
after_script:
- echo "https://${GH_TOKEN}:@github.com"
- PATH=/home/travis/virtualenv/python2.7.9/bin/:$PATH fontbakery-report.py builds/$TRAVIS_COMMIT
- rm -rf builds/$TRAVIS_COMMIT/sources
- rm -rf builds/$TRAVIS_COMMIT/build.state.yaml
- PATH=/home/travis/virtualenv/python2.7.9/bin/:$PATH fontbakery-travis-deploy.py
branches:
  only:
  - master
env:
  global:
    secure: hxt/OKtZryjS81Em7ZwLxbY2glVY6w165KIFr2np8S4eSoknpg9QFGiTA6miC91OR1f7AgUgLCWWE3zqyHBKbc3XYsXhUl2ZqAgauawQYiotTzIwsYNSvjNgDbQXyK31yU438tRCl332xa6sx24hjz6POSPspK3neUN+EDvLM7TBDi+/z92GiCDvf1TnlOwVzCUhIc0fOnKrpJzR3qhq5K5NBX1kTG62t9b5O+KpgM5PAoAGiRse1kVZReCT+Tya5cXZlj9UGj8JUhq5JwsHsBsYaqhq9rAYHLlqLwm1W+tYx9tgndnrvULjfPV5z1QCQB4Z1ZdricxK4f7eJWr6HDB5Z4dOiDCwuDU+JFfpYvO0c4SHJpsNei/tlVZpn++YTwbWqJ67VeBMFKdNPc8GvIVg4EUihDbriiLQAHRfMVbYjQ165Sj0QGFeSR1XOsFmcA8NGP3mN2/HSP5by3Wfu43OSWeS03Xt+SmoioUtf5L6/a6Bfa3UoANsTWmyU15uV3/hLBV4nOmKIJ/yR2pHOYgY7mkfSokSti19BKEA2l6luXxYHGitZc7qFsB0lIGfprfnxFdBl0f+6M/tiYGCYm2u8jE21KkLVZdLvb9B+PBOYoilbVd2j8DlZVzdoSZj2VcFnC03Qy95q74tnKSThfD8poRNg5L8BGvJawrZ1VE=
